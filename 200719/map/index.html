<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax/xml/json</title>
    <!-- <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <!-- <h1>Ajax는 그 자체가 별도의 새로운 언어는 아닙니다. <br>
    HTML, CSS, 자바스크립트, DOM, XML 등 기존에 사용되던 여러 기술을 함께 사용하는 새로운 개발 기법입니다.</h1>
    <p>Ajax는 웹 페이지 전체를 다시 로딩하지 않고도, 웹 페이지의 일부분만을 갱신할 수 있게 해줍니다.<br> 즉 Ajax룰 이용하면 백그라운드 영역에서 서버와 통신하여, 그 결과를 웹 페이지의 일부분에만 표시할 수 있습니다.</p>
    <hr>

    <p id="text">이 단락에 다른 텍스트를 불러옵니다!</p>
    <button id="requestBtn">데이터 불러오기</button>

    <script>
        $(function(){
            $("#requestBtn").on("click", function(){
                $("#text").load("memo.txt");
            });
        });
    </script> -->


    

    <!-- <h1>GET방식의 요청</h1>
    <button type="button" onclick="sendRequest()">GET방식으로 요청 보내기</button>
    <p id="text"></p>

    <script>
        function sendRequest(){
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function(){
                if(httpRequest.readyState == XMLHttpRequest.DONE && httpRequest.status == 200){
                    document.getElementById("text").innrHTML = httpRequest.responseText;
                }
            };
            httpRequest.open("GET","memo.txt",true);
            httpRequest.send();
        }
        //readyState 프로퍼티의 값이 XMLHttpRequest.DONE이면, 서버에 요청한 데이터의 처리가 완료되어 응답할 준비가 완료되었다는 의미.
    </script> -->




    <!-- <h1>주기적으로  Ajax 요청하기</h1>
    <p id="text"></p>

    <script>
        function sendRequest(){
            var httpRequest = new XMLHttpRequest();
            httpRequest.onreadystatechange = function(){
                if(httpRequest.readyState == XMLHttpRequest.DONE && httpRequest.status == 200){
                    document.getElementById("text").innrHTML = httpRequest.responseText;
                }
            };
            httpRequest.open("GET","php/test.php",true);
            httpRequest.send();
        }
        window.setInterval("sendRequest()",500);    //매 0.5초마다 Ajax 요청을 보냄
    </script> -->




    <!-- <script>
        $(function(){
            $.ajax({
                url:'xml/book.xml',
                dataType:'xml',
                success:function(data){
                    $(data).find('book').each(function(){
                        var title = $('title',this).text();
                        var author = $('author',this).text();
                        var price = $('price',this).text();
                        var txt = "<li>" + title + "," + author + "," + price + "</li><hr>";
                        $('body').append(txt);
                    });
                }
            });
        });
    </script> -->




    <script>
        $(function(){   
            //json파일을 data로 가져옴
            $.getJSON('json/book.json', function(data){
                var books = data.book;   //배열 객체 선택
                
                //데이터 순회
                $(books).each(function(i,obj){
                    var title = obj.title;
                    var author = obj.author;
                    var price = obj.price;
                    var txt = "<li>" + title + "," + author + "," + price + "</li><hr>";
                    $('body').append(txt);
                });
            });
        });
        
    </script>
</body>
</html>